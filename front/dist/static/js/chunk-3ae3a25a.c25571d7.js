(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ae3a25a","chunk-2d0d36c4"],{"1eb7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-table",{ref:"skTable",attrs:{border:"full","auto-resize":"","show-overflow":"","highlight-hover-row":"","show-header":!1,"sync-resize":!0,data:e.detailData}},[a("vxe-table-column",{attrs:{field:"label",width:"40%"}}),a("vxe-table-column",{attrs:{field:"value"}})],1)},i=[];a("1bc7"),a("9f60"),a("94f0"),a("0c84"),a("2843"),a("a450"),a("4057");function n(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function l(e,t){if(e){if("string"===typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var s={name:"detailTable",props:{detailList:{type:Array,default:function(){return[]}},selectRow:{type:Object,default:function(){return{}}}},data:function(){return{detailData:[]}},methods:{getInit:function(){var e,t=n(this.detailList);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.field){var r={label:a.title,value:this.selectRow[a.field]};this.detailData.push(r)}}}catch(i){t.e(i)}finally{t.f()}}},created:function(){this.getInit()}},u=s,c=a("c701"),f=Object(c["a"])(u,r,i,!1,null,"49b8cc3c",null);t["a"]=f.exports},"5d65":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-form",{attrs:{data:e.formData,rules:e.formRules,"destroy-on-close":!0,"title-align":"right","title-width":"150"},on:{submit:e.onSubmit}},[e._l(e.formItems,(function(t,r){return[t.itemRender&&"$uploadImg"==t.itemRender.name?a("vxe-form-item",{key:r,attrs:{title:t.title,field:t.field,span:t.span,"item-render":t.itemRender},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-upload",{attrs:{name:"fileInput",headers:e.setHeaders(),action:e.setUrl(t.itemRender.props.action),"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[null!=t.field?a("img",{attrs:{src:t.field}}):a("i",{staticClass:"el-icon-plus"})])]},proxy:!0}],null,!0)}):t.itemRender&&"$divider"==t.itemRender.name?a("div",{key:r,staticStyle:{"background-color":"#fff",top:"0","z-index":"999","text-align":"left"}},[a("divider",{attrs:{title:t.itemRender.props.title}})],1):t.itemRender&&"$buttons"==t.itemRender.name?a("div",{key:r},[a("vxe-form-item",{attrs:{align:"right","title-align":t.titleAlign,"title-width":t.titleWidth,"title-prefix":t.titlePrefix,title:t.title,field:t.field,span:t.span,"item-render":t.itemRender}})],1):a("vxe-form-item",{key:r,attrs:{align:t.align,"title-align":t.titleAlign,"title-width":t.titleWidth,"title-prefix":t.titlePrefix,title:t.title,field:t.field,span:t.span,"item-render":t.itemRender}})]})),a("vxe-form-item",{attrs:{span:24}},[e._t("default")],2)],2)],1)},i=[],n=a("1762"),l=a.n(n),o={name:"skform",props:{formData:{type:Object,default:function(){return{}}},formRules:{type:Object,default:function(){return{}}},formItems:{type:Array,default:function(){return[]}}},data:function(){return{uploadHeaders:{}}},methods:{setHeaders:function(){var e=sessionStorage.getItem("UserInfo");e=l.a.toStringJSON(e);var t={Authorization:"Bearer "+e.token};return t},setUrl:function(e){return"http://127.0.0.1:8000"+e},onSubmit:function(){this.$emit("onSubmit",this.formData)},handleAvatarSuccess:function(e,t){console.log(e)}}},s=o,u=a("c701"),c=Object(u["a"])(s,r,i,!1,null,"383977fc",null);t["default"]=c.exports},"992b":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("vxe-table",{ref:"xTable",attrs:{border:"full","highlight-hover-row":"","highlight-current-row":"",data:e.tableData,height:e.tableHeight,"row-id":"id","auto-resize":!0,"sync-resize":!0,"checkbox-config":e.checkboxConfig},on:{"checkbox-change":e.checkboxChange,"current-change":e.currentChange,"cell-dblclick":e.cellDblClickEvent}},[e._l(e.tableColumns,(function(t,r){return a("vxe-table-column",e._b({key:r},"vxe-table-column",t,!1))})),a("vxe-table-column",{attrs:{title:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button-group",[e._t("handle",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"Update",expression:"'Update'"}],attrs:{type:"primary"},on:{click:function(t){return e.editRowEvent(r)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"Delete",expression:"'Delete'"}],attrs:{type:"danger"},on:{click:function(t){return e.delRowEvent(r)}}},[e._v("删除")])],{data:r})],2)]}}],null,!0)})],2),a("vxe-pager",{attrs:{loading:e.loading1,"current-page":e.tablePage.page,"page-size":e.tablePage.rows,total:e.tablePage.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)])},i=[],n=(a("e680"),{name:"sk-table",props:{tableColumn:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},tablePage:{type:Object,default:function(){return{currentPage:1,pageSize:10,totalResult:20}}},localHeight:{type:Number,default:function(){return 0}}},data:function(){return{loading1:!1,tableHeight:500,selectRow:{},checkboxConfig:{trigger:"cell",highlight:!0},tableColumns:[]}},created:function(){var e=this.getScreen();this.tableHeight=e.height-350-this.localHeight,this.tableColumns=this.tableColumn},methods:{handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=a,this.$emit("handlePageChange",this.tablePage)},cellDblClickEvent:function(e){var t=e.row;this.$emit("onDblClick",t)},checkboxChange:function(e){var t=e.row;this.$emit("checkboxChange",t)},currentChange:function(e){var t=e.row;this.$emit("currentChange",t)},editRowEvent:function(e){this.$emit("editRowEvent",e)},delRowEvent:function(e){this.$emit("delRowEvent",e)}},watch:{tableColumn:function(e){var t=this;this.tableColumns=[],this.$nextTick((function(){t.tableColumns=e}))}}}),l=n,o=a("c701"),s=Object(o["a"])(l,r,i,!1,null,"416b2d26",null);t["a"]=s.exports},c971:function(e,t,a){"use strict";a("f084")},d860:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("skContainerAside",{attrs:{heardHeight:e.heardHeight,footerHeight:e.footerHeight},scopedSlots:e._u([{key:"header",fn:function(){return[e.isBreadcrumb?a("skBreadcrumb",{attrs:{list:e.breadcrumbList}}):e._e()]},proxy:!0},{key:"aside",fn:function(){return[a("div",{staticClass:"roleClass"},[e._v(e._s(e.clickLabel?e.clickLabel:e.breadcrumbList[1].text))]),a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("div",{style:{overflowY:"scroll",height:e.treeHeight+"px"}},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.treeConfig.defaultProps,"check-on-click-node":!0,"highlight-current":!0,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.onNodeClick}})],1)]},proxy:!0}])},[a("div",[e._t("tagHeader"),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"flex-start"},[a("skButton",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.create,expression:"permission.create"}],attrs:{name:"create"},on:{onCreate:e.onCreate}})],1)]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"flex-end"},[a("skSearch",{ref:"skSearch",attrs:{formItems:e.searchConfig.formItems,formData:e.searchConfig.formData,mainValue:e.searchConfig.mainValue},on:{handleClick:e.onSearch}})],1)])],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("skTable",{attrs:{tableData:e.tableData,tableColumn:e.tableColumn,tablePage:e.tablePage,permission:e.permission,localHeight:e.localHeight},on:{checkboxChange:e.checkboxChange,currentChange:e.currentChange,handlePageChange:e.handlePageChange,editRowEvent:e.onUpdate,delRowEvent:e.onDelete,onDblClick:e.cellDblClickEvent}})],1),a("div",[a("vxe-modal",{attrs:{title:e.dialogType.title,width:"800",height:"70%",mask:!1,"lock-view":!1,resize:""},scopedSlots:e._u([{key:"default",fn:function(){return["detail"==e.dialogType.type?a("div",{staticStyle:{"margin-top":"10px"}},[a("detailTable",{attrs:{"detail-list":e.formConfig.formItems,"select-row":e.selectRow}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"create"==e.dialogType.type,expression:"dialogType.type=='create'"}]},[a("skForm",{attrs:{formData:e.formConfig.formData,formItems:e.formConfig.formItems,formRules:e.formConfig.formRules},on:{onSubmit:e.onCreateSubmit}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"update"==e.dialogType.type,expression:"dialogType.type=='update'"}]},[a("skForm",{attrs:{formData:e.updateData,formItems:e.formConfig.formItems,formRules:e.formConfig.formRules},on:{onSubmit:e.onUpdateSubmit}})],1)]},proxy:!0}]),model:{value:e.dialogType.show,callback:function(t){e.$set(e.dialogType,"show",t)},expression:"dialogType.show"}})],1)],2)])},i=[],n=(a("1bc7"),a("9f60"),a("94f0"),a("0c84"),a("2843"),a("4057"),a("a450"),a("fc02"),a("e680"),a("992b")),l=a("1eb7"),o=a("5d65"),s=a("b775"),u=a("11f5");function c(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,n=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw n}}}}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"treeSinglePage",components:{skTable:n["a"],detailTable:l["a"],skForm:o["default"]},props:{breadcrumbList:{type:Array,default:function(){return[]}},tableColumn:{type:Array,default:function(){return[]}},tableUrls:{type:Object,default:function(){return{list:{},create:{},update:{},delete:{}}}},tablePage:{type:Object,default:function(){return{page:1,rows:10,total:0}}},permission:{type:Object,default:function(){return{create:"add",update:"edit",delete:"del"}}},formConfig:{type:Object,default:function(){return{formData:{},formItems:[],formRules:{},detailList:[]}}},searchConfig:{type:Object,default:function(){return{formItems:[],formData:{UserName:null},mainValue:"UserName",parentSearchId:"",otherSearch:""}}},treeConfig:{type:Object,default:function(){return{url:"",defaultProps:{children:"children",label:"label"},treeProps:{parentKey:"pCode",key:"rowCode"},searchId:"id",params:{addChild:{}},isOnlyChild:!1}}},isBreadcrumb:{type:Boolean,default:function(){return!0}},localHeight:{type:Number,default:function(){return 0}},temporaryData:{type:Object,default:function(){return{treeData:[],tableData:[]}}},treeOptions:{type:Object,default:function(){return{parentKey:"pCode",key:"rowCode"}}}},data:function(){return{heardHeight:"40px",footerHeight:"60px",loading1:!1,initData:{},selectRow:{},updateData:null,tableData:[],dialogType:{show:!1,type:"create",title:"新增"},query:{page:1,rows:10,wheres:null},filterText:"",treeHeight:500,clickId:0,clickLabel:"",clickData:{},treeData:[]}},created:function(){this.isBreadcrumb||(this.heardHeight="20px",this.footerHeight="0px"),Object(u["b"])(this.formConfig.formData,this.initData),this.getTree();var e=this.getScreen();this.treeHeight=e.height-340-this.localHeight},methods:{getTree:function(){var e=this;if(!this.emptyValue(this.treeConfig.url))return Object(s["a"])({url:this.treeConfig.url,method:"post",data:{}}).then((function(t){e.treeData=e.$utils.toArrayTree(t.rows,e.treeOptions)}));this.treeData=this.temporaryData.treeData},getInit:function(){var e=this;if(this.query.page=this.tablePage.page,this.query.rows=this.tablePage.rows,!this.emptyValue(this.tableUrls.list.url))return Object(s["a"])({url:this.tableUrls.list.url,method:"post",data:this.query}).then((function(t){e.tableData=t.rows,e.tablePage.total=t.total}));this.tableData=this.temporaryData.tableData},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.tablePage.page=t,this.tablePage.rows=a,this.getInit()},onSearch:function(){var e=this.isSelect();if(e){var t=this.getSearchParameters();this.query.wheres=JSON.stringify(t),this.tablePage.page=1,this.tablePage.rows=10,this.getInit()}},checkboxChange:function(e){console.log(e)},currentChange:function(e){this.selectRow=e,Object(u["b"])(this.selectRow,this.updateData)},cellDblClickEvent:function(e){this.dialogType.title="查看详情",this.dialogType.type="detail",this.dialogType.show=!0,this.selectRow=e},onCreate:function(){var e=this.isSelect();e&&(this.dialogType.show=!0,this.dialogType.type="create",this.dialogType.title="新增",Object(u["b"])(this.initData,this.formConfig.formData))},onUpdate:function(e){this.dialogType.title="编辑",this.dialogType.type="update",this.dialogType.show=!0,this.updateData=Object(u["b"])(e)},onCreateSubmit:function(){var e=this;this.formConfig.formData=this.setFormKeyValue(this.treeConfig.params.addChild);var t=this.setForm(this.tableUrls.create.params);if(!this.emptyValue(this.tableUrls.create.url))return Object(s["a"])({url:this.tableUrls.create.url,method:"post",data:t}).then((function(t){t.status?(e.dialogType.show=!1,e.$XModal.message({message:"新增成功",status:"success",id:"unique1"}),e.getInit()):e.$XModal.message({message:t.message,status:"error",id:"unique1"})}))},onUpdateSubmit:function(){var e=this;this.updateData=this.setFormKeyValue(this.treeConfig.params.addChild);var t=this.setForm(this.tableUrls.update.params);if(!this.emptyValue(this.tableUrls.update.url))return Object(s["a"])({url:this.tableUrls.update.url,method:"post",data:t}).then((function(t){t.status?(e.dialogType.show=!1,e.$XModal.message({message:"修改成功",status:"success",id:"unique2"}),e.getInit()):e.$XModal.message({message:t.message,status:"error",id:"unique2"})}))},onDelete:function(e){var t=this,a=this.tableData.length;this.$XModal.confirm("您确定要删除该条数据吗？").then((function(r){if("confirm"==r){var i=[];if(i.push(e[t.tableUrls.delete.params.delKeys]),!t.emptyValue(t.tableUrls.delete.url))return Object(s["a"])({url:t.tableUrls.delete.url,method:"post",data:i}).then((function(e){e.status?(1===a&&(t.tablePage.page=t.tablePage.page-1),t.dialogType.show=!1,t.$XModal.message({message:"删除成功",status:"success",id:"del1"}),t.getInit()):t.$XModal.message({message:e.message,status:"error",id:"del2"})}))}}))},setForm:function(e){var t={},a={mainData:"create"==this.dialogType.type?this.formConfig.formData:this.updateData,updateData:this.updateData,childList:null};for(var r in e)if(e[r])if(e[r].indexOf(".")>=0){var i=e[r].split(".");t[r]=a[i[0]][i[1]]}else t[r]=a[e[r]];else t[r]="";return t},setFormKeyValue:function(e){var t=Object(u["b"])("create"==this.dialogType.type?this.formConfig.formData:this.updateData),a={mainData:t,_null:null,_0:0,_1:1,clickId:this.clickId,clickLabel:this.clickLabel,clickData:this.clickData};for(var r in e)if(e[r])if(e[r].indexOf(".")>=0){var i=e[r].split(".");t[r]=a[i[0]][i[1]]}else t[r]=a[e[r]];else t[r]="";return t},getSearchParameters:function(){var e=[],t=this.searchConfig.formData,a={name:this.searchConfig.parentSearchId,value:this.clickId};for(var r in t)if(!this.emptyValue(t[r])){var i=this.typeValue(r),n={name:r,value:t[r]};i&&(n["displayType"]=i),e.push(n)}return this.searchConfig.parentSearchId&&e.push(a),e},emptyValue:function(e){return null===e||void 0===e||""===e},typeValue:function(e){var t,a=this.searchConfig.formItems,r=c(a);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.field===e&&"$select"==i.itemRender.name)return"drop"}}catch(n){r.e(n)}finally{r.f()}},isSelect:function(){var e=this.clickId,t=this.clickData[this.treeConfig.defaultProps.children];return e?!(this.treeConfig.isOnlyChild&&!(this.emptyValue(t)||t.length<=0))||(this.$XModal.message({message:"请选择最下层节点",status:"error",id:"select2"}),!1):(this.$XModal.message({message:"请选择节点",status:"error",id:"select1"}),!1)},filterNode:function(e,t){return!e||-1!==t[this.treeConfig.defaultProps.label].indexOf(e)},onNodeClick:function(e,t,a){this.clickId=e[this.treeConfig.searchId],this.clickLabel=e[this.treeConfig.defaultProps.label],this.clickData=e,this.query.wheres=null,this.$refs.skSearch.resetSearch(),this.onSearch()}},watch:{filterText:function(e){this.$refs.tree.filter(e)},"searchConfig.otherSearch":function(e){var t=this.isSelect();t&&(this.$refs.skSearch.resetSearch(),this.onSearch())}}},m=d,p=(a("c971"),a("c701")),g=Object(p["a"])(m,r,i,!1,null,"a1f2eb82",null);t["default"]=g.exports},f084:function(e,t,a){}}]);