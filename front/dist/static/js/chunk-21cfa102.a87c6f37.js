(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21cfa102","chunk-2d0d36c4"],{"1eb7":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("vxe-table",{ref:"skTable",attrs:{border:"full","auto-resize":"","show-overflow":"","highlight-hover-row":"","show-header":!1,"sync-resize":!0,data:t.detailData}},[r("vxe-table-column",{attrs:{field:"label",width:"40%"}}),r("vxe-table-column",{attrs:{field:"value"}})],1)},a=[];r("1bc7"),r("9f60"),r("94f0"),r("0c84"),r("2843"),r("a450"),r("4057");function i(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return l=t.done,t},e:function(t){s=!0,i=t},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){if(t){if("string"===typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={name:"detailTable",props:{detailList:{type:Array,default:function(){return[]}},selectRow:{type:Object,default:function(){return{}}}},data:function(){return{detailData:[]}},methods:{getInit:function(){var t,e=i(this.detailList);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(r.field){var n={label:r.title,value:this.selectRow[r.field]};this.detailData.push(n)}}}catch(a){e.e(a)}finally{e.f()}}},created:function(){this.getInit()}},u=s,c=r("c701"),f=Object(c["a"])(u,n,a,!1,null,"49b8cc3c",null);e["a"]=f.exports},"5d65":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("vxe-form",{attrs:{data:t.formData,rules:t.formRules,"destroy-on-close":!0,"title-align":"right","title-width":"150"},on:{submit:t.onSubmit}},[t._l(t.formItems,(function(e,n){return[e.itemRender&&"$uploadImg"==e.itemRender.name?r("vxe-form-item",{key:n,attrs:{title:e.title,field:e.field,span:e.span,"item-render":e.itemRender},scopedSlots:t._u([{key:"default",fn:function(){return[r("el-upload",{attrs:{name:"fileInput",headers:t.setHeaders(),action:t.setUrl(e.itemRender.props.action),"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[null!=e.field?r("img",{attrs:{src:e.field}}):r("i",{staticClass:"el-icon-plus"})])]},proxy:!0}],null,!0)}):e.itemRender&&"$divider"==e.itemRender.name?r("div",{key:n,staticStyle:{"background-color":"#fff",top:"0","z-index":"999","text-align":"left"}},[r("divider",{attrs:{title:e.itemRender.props.title}})],1):e.itemRender&&"$buttons"==e.itemRender.name?r("div",{key:n},[r("vxe-form-item",{attrs:{align:"right","title-align":e.titleAlign,"title-width":e.titleWidth,"title-prefix":e.titlePrefix,title:e.title,field:e.field,span:e.span,"item-render":e.itemRender}})],1):r("vxe-form-item",{key:n,attrs:{align:e.align,"title-align":e.titleAlign,"title-width":e.titleWidth,"title-prefix":e.titlePrefix,title:e.title,field:e.field,span:e.span,"item-render":e.itemRender}})]})),r("vxe-form-item",{attrs:{span:24}},[t._t("default")],2)],2)],1)},a=[],i=r("1762"),o=r.n(i),l={name:"skform",props:{formData:{type:Object,default:function(){return{}}},formRules:{type:Object,default:function(){return{}}},formItems:{type:Array,default:function(){return[]}}},data:function(){return{uploadHeaders:{}}},methods:{setHeaders:function(){var t=sessionStorage.getItem("UserInfo");t=o.a.toStringJSON(t);var e={Authorization:"Bearer "+t.token};return e},setUrl:function(t){return"http://127.0.0.1:8000"+t},onSubmit:function(){this.$emit("onSubmit",this.formData)},handleAvatarSuccess:function(t,e){console.log(t)}}},s=l,u=r("c701"),c=Object(u["a"])(s,n,a,!1,null,"383977fc",null);e["default"]=c.exports},"6a61":function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch($){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),o=new O(n||[]);return i._invoke=D(t,r,o),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch($){return{type:"throw",arg:$}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",d="executing",m="completed",p={};function g(){}function v(){}function b(){}var y={};y[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==r&&n.call(x,i)&&(y=x);var C=b.prototype=g.prototype=Object.create(y);function T(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function R(t,e){function r(a,i,o,l){var s=c(t[a],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):e.resolve(f).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,l)}))}l(s.arg)}var a;function i(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}this._invoke=i}function D(t,e,r){var n=f;return function(a,i){if(n===d)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw i;return _()}r.method=a,r.arg=i;while(1){var o=r.delegate;if(o){var l=k(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=c(t,e,r);if("normal"===s.type){if(n=r.done?m:h,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}function k(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=c(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){while(++a<t.length)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:_}}function _(){return{value:e,done:!0}}return v.prototype=C.constructor=b,b.constructor=v,v.displayName=s(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},T(R.prototype),R.prototype[o]=function(){return this},t.AsyncIterator=R,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new R(u(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(C),s(C,l,"Generator"),C[i]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},"7b71":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"flex-start"},[r("skButton",{directives:[{name:"permission",rawName:"v-permission",value:t.permission.create,expression:"permission.create"}],attrs:{name:"create"},on:{onCreate:t.onCreate}})],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"flex-end"},[r("skSearch",{attrs:{formItems:t.searchConfig.formItems,formData:t.searchConfig.formData,mainValue:t.searchConfig.mainValue},on:{handleClick:t.onSearch}})],1)])],1),r("div",[r("div",[r("skTable",{attrs:{tableData:t.tableData,tableColumn:t.tableColumn,tablePage:t.tablePage,permission:t.permission,localHeight:t.localHeight},on:{checkboxChange:t.checkboxChange,currentChange:t.currentChange,handlePageChange:t.handlePageChange,editRowEvent:t.onUpdate,delRowEvent:t.onDelete,onDblClick:t.cellDblClickEvent}})],1),r("div",[r("vxe-modal",{attrs:{title:t.dialogType.title,transfer:!0,width:t.modelConfig.width,height:t.modelConfig.height,mask:!0,"lock-view":!1,resize:""},scopedSlots:t._u([{key:"default",fn:function(){return["detail"==t.dialogType.type?r("div",{staticStyle:{"margin-top":"10px"}},[r("detailTable",{attrs:{"detail-list":t.formConfig.detailList,"select-row":t.selectRow}})],1):t._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:"create"==t.dialogType.type,expression:"dialogType.type=='create'"}]},[r("skForm",{attrs:{formData:t.formConfig.formData,formItems:t.formConfig.formItems,formRules:t.formConfig.formRules},on:{onSubmit:t.onCreateSubmit}},[r("el-divider",{attrs:{"content-position":"left"}},[t._v("其他信息")]),r("editTable",{ref:"createeditTables",attrs:{tableData:t.childTableData,tableColumn:t.childTableConfig.childTableColumn,validRules:t.childTableConfig.childTableRule,formData:t.childTableConfig.childTableFormData}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"update"==t.dialogType.type,expression:"dialogType.type=='update'"}]},[r("skForm",{attrs:{formData:t.updateData,formItems:t.formConfig.formItems,formRules:t.formConfig.formRules},on:{onSubmit:t.onUpdateSubmit}},[r("el-divider",{attrs:{"content-position":"left"}},[t._v("其他信息")]),r("editTable",{ref:"updateeditTables",attrs:{tableData:t.childTableData,tableColumn:t.childTableConfig.childTableColumn,validRules:t.childTableConfig.childTableRule,formData:t.childTableConfig.childTableFormData}})],1)],1)]},proxy:!0}]),model:{value:t.dialogType.show,callback:function(e){t.$set(t.dialogType,"show",e)},expression:"dialogType.show"}})],1)])],1)},a=[],i=(r("9f60"),r("94f0"),r("0c84"),r("2843"),r("4057"),r("1bc7"),r("a450"),r("fc02"),r("e680"),r("992b")),o=r("1eb7"),l=r("5d65"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"20px"}},[r("vxe-toolbar",{attrs:{perfect:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[r("vxe-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",status:"primary",icon:"fa fa-plus"},on:{click:t.insertEvent}},[t._v("新增")])]},proxy:!0}])}),r("vxe-table",{ref:"editTable",attrs:{border:"",resizable:"","show-overflow":"","keep-source":"","auto-resize":!0,"sync-resize":!0,loading:t.loading,data:t.tableData,"edit-rules":t.validRules,"edit-config":{trigger:"manual",mode:"row",autoClear:!1}}},[t._l(t.tableColumn,(function(e,n){return r("vxe-table-column",t._b({key:n},"vxe-table-column",e,!1))})),r("vxe-table-column",{attrs:{title:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t.$refs.editTable.isActiveByRow(n)?[r("vxe-button",{attrs:{type:"text",status:"primary"},on:{click:function(e){return t.saveRowEvent(n)}}},[t._v("确认")]),r("vxe-button",{attrs:{type:"text",status:"info"},on:{click:function(e){return t.cancelRowEvent(n)}}},[t._v("取消")])]:[r("vxe-button",{attrs:{type:"text",status:"primary"},on:{click:function(e){return t.editRowEvent(n)}}},[t._v("编辑")]),r("vxe-button",{attrs:{type:"text",status:"danger"},on:{click:function(e){return t.delRowEvent(n)}}},[t._v("删除")])]]}}])})],2)],1)},u=[];r("6a61");function c(t,e,r,n,a,i,o){try{var l=t[i](o),s=l.value}catch(u){return void r(u)}l.done?e(s):Promise.resolve(s).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){c(i,n,a,o,l,"next",t)}function l(t){c(i,n,a,o,l,"throw",t)}o(void 0)}))}}var h=r("11f5"),d={name:"editTable",props:{tableColumn:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},validRules:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1}},methods:{validAllEvent:function(){var t=f(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.editTable.validate(!0).catch((function(t){return t}));case 2:if(e=t.sent,!e){t.next=8;break}return this.$XModal.message({status:"error",message:"请检查子表单内容是否正确填写！",id:"validAllEvent1"}),t.abrupt("return",!1);case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),insertEvent:function(){var t=f(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(h["b"])(this.formData),t.next=3,this.$refs.editTable.insert(e);case 3:return r=t.sent,n=r.row,t.next=7,this.$refs.editTable.validate(n).catch((function(t){return t}));case 7:t.sent;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSelectEvent:function(){var t=this.$refs.editTable.getCheckboxRecords();return t},getInsertEvent:function(){var t=this.$refs.editTable.getInsertRecords();return t},getRemoveEvent:function(){var t=this.$refs.editTable.getRemoveRecords();return t},getUpdateEvent:function(){var t=this.$refs.editTable.getUpdateRecords();return t},editRowEvent:function(t){this.$refs.editTable.setActiveRow(t)},delRowEvent:function(t){var e=this;this.$XModal.confirm("您确定要删除吗？").then((function(r){"confirm"===r&&e.$refs.editTable.remove(t)}))},saveRowEvent:function(){var t=f(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.$refs.editTable,t.next=3,r.validate(e).catch((function(t){return t}));case 3:n=t.sent,n||r.clearActived();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelRowEvent:function(t){var e=this.$refs.editTable;e.clearActived().then((function(){return e.revertData(t)}))}}},m=d,p=r("c701"),g=Object(p["a"])(m,s,u,!1,null,"4d82b6ca",null),v=g.exports,b=r("b775");function y(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=w(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function w(t,e){if(t){if("string"===typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C={name:"parentChildPage",components:{skTable:i["a"],detailTable:o["a"],skForm:l["default"],editTable:v},props:{tableColumn:{type:Array,default:function(){return[]}},tableUrls:{type:Object,default:function(){return{list:{},create:{},update:{},delete:{}}}},tablePage:{type:Object,default:function(){return{currentPage:1,pageSize:10,totalResult:20}}},permission:{type:Object,default:function(){return{create:"add",update:"edit",delete:"del"}}},formConfig:{type:Object,default:function(){return{formData:{},formItems:[],formRules:{},detailList:[]}}},searchConfig:{type:Object,default:function(){return{formItems:[],formData:{UserName:null},mainValue:"UserName"}}},childTableConfig:{type:Object,default:function(){return{childTableColumn:[],childTableRule:{},childTableFormData:{},childFromParent:{}}}},localHeight:{type:Number,default:function(){return 0}},temporaryData:{type:Object,default:function(){return{tableData:[],childTableData:[]}}}},data:function(){return{loading1:!1,initData:{},selectRow:{},updateData:null,tableData:[],childTableData:[],dialogType:{show:!1,type:"create",title:"新增"},modelConfig:{height:800,width:800},query:{page:1,rows:10,wheres:null}}},methods:{getInit:function(){var t=this;if(this.query.page=this.tablePage.page,this.query.rows=this.tablePage.rows,!this.emptyValue(this.tableUrls.list.url))return Object(b["a"])({url:this.tableUrls.list.url,method:"post",data:this.query}).then((function(e){t.tableData=e.rows,t.tablePage.total=e.total}));this.tableData=this.temporaryData.tableData,this.childTableData=this.temporaryData.childTableData},handlePageChange:function(t){var e=t.currentPage,r=t.pageSize;this.tablePage.page=e,this.tablePage.rows=r,this.getInit()},onSearch:function(){var t=this.getSearchParameters();this.query.wheres=JSON.stringify(t),this.tablePage.page=1,this.tablePage.rows=10,this.getInit(),this.$XModal.message({message:"这是搜索",status:"warning",id:"unique2"})},checkboxChange:function(t){console.log(t)},currentChange:function(t){this.selectRow=t,this.updateData=JSON.parse(JSON.stringify(this.selectRow))},cellDblClickEvent:function(t){this.dialogType.title="查看详情",this.dialogType.type="detail",this.dialogType.show=!0,this.selectRow=t},onCreate:function(){this.dialogType.show=!0,this.dialogType.type="create",this.dialogType.title="新增",this.formConfig.formData=JSON.parse(JSON.stringify(this.initData))},onUpdate:function(t){this.selectRow=t,this.dialogType.title="编辑",this.dialogType.type="update",this.dialogType.show=!0,this.updateData=JSON.parse(JSON.stringify(this.selectRow))},onCreateSubmit:function(){var t=this,e=this.setForm(this.tableUrls.create.params);if(e.childValidate){if(!this.emptyValue(this.tableUrls.create.url))return Object(b["a"])({url:this.tableUrls.create.url,method:"post",data:e}).then((function(e){e.status?(t.dialogType.show=!1,t.$XModal.message({message:"新增成功",status:"success",id:"unique1"}),t.getInit()):t.$XModal.message({message:e.message,status:"success",id:"unique1"})}))}else console.log(296,e)},onUpdateSubmit:function(){var t=this,e=this.setForm(this.tableUrls.update.params);if(!this.emptyValue(this.tableUrls.update.url))return Object(b["a"])({url:this.tableUrls.update.url,method:"post",data:e}).then((function(e){e.status?(t.dialogType.show=!1,t.$XModal.message({message:"修改成功",status:"success",id:"unique2"}),t.getInit()):t.$XModal.message({message:e.message,status:"success",id:"unique2"})}))},onDelete:function(t){var e=this,r=this.tableData.length;this.$XModal.confirm("您确定要删除吗？").then((function(n){if("confirm"==n){1===r&&(e.tablePage.page=e.tablePage.page-1);var a=[];if(a.push(t[e.tableUrls.delete.params.delKeys]),!e.emptyValue(e.tableUrls.delete.url))return Object(b["a"])({url:e.tableUrls.delete.url,method:"post",data:a}).then((function(t){t.status?(e.dialogType.show=!1,e.$XModal.message({message:"删除成功",status:"success",id:"unique2"}),e.getInit()):e.$XModal.message({message:t.message,status:"success",id:"unique2"})}))}else e.$XModal.message({message:"已取消",status:"info",id:"del"})}))},setForm:function(t){var e=this.getChildReturn(),r={},n={mainData:this.formConfig.formData,updateData:this.updateData,detailData:this.setChildDataFromParent(Object(h["a"])(e.insertEvent,e.updateRecords))};for(var a in t)if(t[a])if(t[a].indexOf(".")>=0){var i=t[a].split(".");r[a]=n[i[0]][i[1]]}else r[a]=n[t[a]];else r[a]="";return r.childValidate=e.validate,r},getSearchParameters:function(){var t=[],e=this.searchConfig.formData;for(var r in e)if(!this.emptyValue(e[r])){var n=this.typeValue(r),a={name:r,value:e[r]};n&&(a["displayType"]=n),t.push(a)}return t},emptyValue:function(t){return null===t||void 0===t||""===t},typeValue:function(t){var e,r=this.searchConfig.formItems,n=y(r);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.field===t&&"$select"==a.itemRender.name)return"drop"}}catch(i){n.e(i)}finally{n.f()}},getChildReturn:function(){var t=this.$refs[this.dialogType.type+"editTables"],e={};return e.validate=t.validAllEvent(),e.selectEvent=t.getSelectEvent(),e.insertEvent=t.getInsertEvent(),e.removeEvent=t.getRemoveEvent(),e.updateRecords=t.getUpdateEvent(),e},setChildDataFromParent:function(t){var e=this,r=t||[],n=this.childTableConfig.childFromParent;return r.length>0&&r.forEach((function(t){for(var r in n)t[r]=e.formConfig.formData[n[r]]})),r}},created:function(){this.initData=JSON.parse(JSON.stringify(this.formConfig.formData)),this.getInit();var t=this.getScreen();this.modelConfig={height:t.height-300,width:t.width-500}}},T=C,R=Object(p["a"])(T,n,a,!1,null,"492d5977",null);e["default"]=R.exports},"992b":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("vxe-table",{ref:"xTable",attrs:{border:"full","highlight-hover-row":"","highlight-current-row":"",data:t.tableData,height:t.tableHeight,"row-id":"id","auto-resize":!0,"sync-resize":!0,"checkbox-config":t.checkboxConfig},on:{"checkbox-change":t.checkboxChange,"current-change":t.currentChange,"cell-dblclick":t.cellDblClickEvent}},[t._l(t.tableColumns,(function(e,n){return r("vxe-table-column",t._b({key:n},"vxe-table-column",e,!1))})),r("vxe-table-column",{attrs:{title:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-button-group",[t._t("handle",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"Update",expression:"'Update'"}],attrs:{type:"primary"},on:{click:function(e){return t.editRowEvent(n)}}},[t._v("编辑")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"Delete",expression:"'Delete'"}],attrs:{type:"danger"},on:{click:function(e){return t.delRowEvent(n)}}},[t._v("删除")])],{data:n})],2)]}}],null,!0)})],2),r("vxe-pager",{attrs:{loading:t.loading1,"current-page":t.tablePage.page,"page-size":t.tablePage.rows,total:t.tablePage.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":t.handlePageChange}})],1)])},a=[],i=(r("e680"),{name:"sk-table",props:{tableColumn:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},tablePage:{type:Object,default:function(){return{currentPage:1,pageSize:10,totalResult:20}}},localHeight:{type:Number,default:function(){return 0}}},data:function(){return{loading1:!1,tableHeight:500,selectRow:{},checkboxConfig:{trigger:"cell",highlight:!0},tableColumns:[]}},created:function(){var t=this.getScreen();this.tableHeight=t.height-350-this.localHeight,this.tableColumns=this.tableColumn},methods:{handlePageChange:function(t){var e=t.currentPage,r=t.pageSize;this.tablePage.currentPage=e,this.tablePage.pageSize=r,this.$emit("handlePageChange",this.tablePage)},cellDblClickEvent:function(t){var e=t.row;this.$emit("onDblClick",e)},checkboxChange:function(t){var e=t.row;this.$emit("checkboxChange",e)},currentChange:function(t){var e=t.row;this.$emit("currentChange",e)},editRowEvent:function(t){this.$emit("editRowEvent",t)},delRowEvent:function(t){this.$emit("delRowEvent",t)}},watch:{tableColumn:function(t){var e=this;this.tableColumns=[],this.$nextTick((function(){e.tableColumns=t}))}}}),o=i,l=r("c701"),s=Object(l["a"])(o,n,a,!1,null,"416b2d26",null);e["a"]=s.exports}}]);